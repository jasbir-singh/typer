(this["webpackJsonpswara-js"]=this["webpackJsonpswara-js"]||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(50),i=n.n(o),c=(n(67),n(14)),s=n(15),u=n(18),p=n(16),l=n(19),h=n(5),d=n(24),f=Object(h.b)((function(e){return{wordToType:e.wordToType,position:e.position}}))((function(e){var t=e.wordToType,n=e.position;return a.a.createElement("div",{class:"input-group input-group-lg m-2"},a.a.createElement("input",{type:"text",placeholder:t.slice(0,n.char),class:"form-control"}))})),y=n(25),m=function(e){return e.map((function(e){return e.match(/([^\s]+)|\s/g)}))},g=function(e){return e.reduce((function(e,t){return e+t}),0)},b=function(e){return e/60||0},v=m(["Did you ever stop to think that a dog is the only animal that doesn't have to work for a living? A hen has to lay eggs, a cow has to give milk, and a canary has to sing. But a dog makes his living by giving you nothing but love.","When I was five years old, my father bought a little yellow-haired pup for fifty cents. He was the light and joy of my childhood. Every afternoon about four-thirty, he would sit in the front yard with his beautiful eyes staring steadfastly at the path, and as soon as he heard my voice or saw me swinging my dinner pail through the buck brush, he was off like a shot, racing breathlessly up the hill to greet me with leaps of joy and barks of sheer ecstasy. "]);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={text:[[""]],wordToType:null,position:{word:0,char:0,paragraph:0},numberOfErrors:0,typingFinished:!1},T=O({},E,{text:v,wordToType:v[0][0]});function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="FETCH_RANDOM_ARTICLE_FAILED",P="TYPE_STARTED",S="TYPE_SUCCESS",A="TYPE_FAIL",D="UPDATE_TYPING_STATS",_="TYPE_FINISHED",C="FETCH_RANDOM_ARTICLE_SUCCESS",I="FETCH_RANDOM_ARTICLE",F="RESET_TYPING_STATE",N=function(){return{type:F,payload:E}},L=function(e){var t=e.paragraph,n=e.char,r=e.word,a=e.text;return{type:S,payload:{position:{paragraph:t,char:n,word:r},wordToType:a[t][r]}}},R=function(){return{type:_,payload:{typingFinished:!0,typingStarted:!1,position:{char:0,word:0,paragraph:0}}}},W=function(){return{type:"FETCH_RANDOM_ARTICLE",payload:{loading:!0}}},M=function(e,t){var n,r=m((n=e,n.replace(/<(?:.|\n)*?>/gm,"")).split("\n").filter((function(e){return 0!==e.length})));return{type:"FETCH_RANDOM_ARTICLE_SUCCESS",payload:{text:r,title:t,wordToType:r[0][0],loading:!1}}},H=n(53),U=n(54),Y=Object(h.b)((function(e){return{position:e.position}}))((function(e){var t=e.word,n=e.position,r=e.paraIndex,o=e.wordIndex,i=r===n.paragraph&&o===n.word?"current-word":null;return a.a.createElement("span",{className:i},t.split("").map((function(e,t){return a.a.createElement("span",{key:t,className:(r=t,i&&r===n.char?"char--current":"")},e);var r})))}));function z(){var e=Object(H.a)(["\n  .current-word {\n    background-color: blanchedalmond;\n  }\n\n  .char--current {\n    text-decoration: underline;\n    font-weight: bolder;\n    font-size: 2rem;\n    color: green;\n  };\n\n  .char--correctly-typed {\n    color: green;\n  };\n\n  .char--error {\n    background-color: red;\n    color: white;\n  }\n"]);return z=function(){return e},e}var B=U.a.div(z()),K=function(e){var t=e.text,n=e.paraIndex;return a.a.createElement(B,{className:"pb-3"},t.map((function(e,t){return a.a.createElement(Y,{word:e,key:t,wordIndex:t,paraIndex:n})})))},q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).keyPress=n.keyPress.bind(Object(d.a)(n)),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"keyPress",value:function(e){e.preventDefault();var t=this.props,n=t.text,r=t.position,a=t.wordToType,o=t.typeStarted,i=t.handleSuccesfulTypedKey,c=t.typeFail,s=t.startedTypingAt;r.paragraph+r.word+r.char!==0||s||o(),e.key===a[r.char]?i(e,r,n):c(e.key,a[r.char])}},{key:"componentDidMount",value:function(){console.log("added event listner ".concat(this.props.text[0][0])),document.addEventListener("keypress",this.keyPress,!1)}},{key:"componentWillUnmount",value:function(){console.log("removed event listner ".concat(this.props.text[0][0])),document.removeEventListener("keypress",this.keyPress,!1)}},{key:"paragraphs",value:function(){var e=this;return this.props.text.map((function(t,n){return a.a.createElement(K,Object.assign({key:"".concat(t,"-").concat(n)},e.props,{text:t,paraIndex:n,className:"para-".concat(n)})," >")}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"text-justify jumbotron"},this.paragraphs(),this.props.title&&a.a.createElement("p",null,a.a.createElement("em",null,this.props.title)),a.a.createElement(f,null))}}]),t}(r.Component),G={fetchRandomArticle:W,typeSuccess:L,typeStarted:function(){var e=(new Date).getTime();return{type:P,payload:{currentTime:e,startedTypingAt:e}}},typeFail:function(e){return{type:A,payload:{lastKeyTyped:e}}},typeFinished:R,handleSuccesfulTypedKey:function(e,t,n){return function(e){var r=n[t.paragraph][t.word].length===t.char+1,a=n[t.paragraph].length===t.word+1;e(n.length===t.paragraph+1&&a&&r?R():L(a&&r?{text:n,paragraph:t.paragraph+1,word:0,char:0}:k({text:n},t,r?{word:t.word+1,char:0}:{char:t.char+1})))}}},J=Object(h.b)((function(e){return{text:e.text,title:e.title,position:e.position,wordToType:e.wordToType,errorPosition:e.errorPosition,startedTypingAt:e.startedTypingAt}}),G)(q),Q=n(57),$=function(e){var t=e.loading;return a.a.createElement("div",null,t?a.a.createElement(Q.Wave,{size:150}):a.a.createElement(J,null))},V=function(e){var t=e.stat,n=e.text;return a.a.createElement("div",{className:"border-bottom flex-fill text-center"},a.a.createElement("span",{style:{fontSize:"3rem"}},t),n)},X=function(e){var t=e.stats;return a.a.createElement("div",{className:"d-flex align-content-center mt-4 mb-4"},t.map((function(e,t){return a.a.createElement(V,Object.assign({key:t},e))})))},Z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.startLoop()}},{key:"componentWillUnmount",value:function(){this.stopLoop()}},{key:"startLoop",value:function(){this._loop||(this._loop=setInterval(this.loop.bind(this),2e3))}},{key:"loop",value:function(){this.props.updateTypingStats()}},{key:"stopLoop",value:function(){clearInterval(this._loop)}},{key:"stats",value:function(){var e=this.props,t=e.charsToType,n=e.timeElapsed,r=e.numberOfErrors;return[{stat:e.wpm,text:"WPM"},{stat:e.cpm,text:"CPM"},{stat:n||0,text:"s elapsed"},{stat:t,text:"chars to type"},{stat:r,text:"errors"}]}},{key:"render",value:function(){return this.props.typingFinished&&this.stopLoop(),a.a.createElement(X,{stats:this.stats()})}}]),t}(r.Component),ee=Object(h.b)((function(e){var t,n,r=e.position,a=e.numberOfErrors,o=e.text,i=e.startedTypingAt,c=e.currentTime,s=e.typingFinished,u=(c-i)/1e3,p=g(o.slice(0,r.paragraph).map((function(e){return e.length})))+g(o[r.paragraph].slice(0,r.word).map((function(e){return e.length})))+r.char,l=(n=u,(t=p)&&b(n)?Math.round(t/b(n),2):0),h=function(e){return Math.round(e/5,2)}(l);return{charsToType:g(o.map((function(e){return g(e.map((function(e){return e.length})))})))-p,timeElapsed:u,typingFinished:s,numberOfErrors:a,wpm:h,cpm:l}}),{updateTypingStats:function(){return{type:D,payload:{currentTime:(new Date).getTime()}}}})(Z),te={fetchRandomArticle:W},ne=Object(h.b)(null,te)((function(e){var t=e.fetchRandomArticle;return a.a.createElement("p",{className:"btn btn-primary",onClick:t},"Fetch random Wiki Article")})),re=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"typingSummary",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Summary Statistics"),a.a.createElement(ee,null),a.a.createElement(ne,null))}},{key:"currentlyTyping",value:function(){var e=this.props.loading;return a.a.createElement("div",null,a.a.createElement(ee,null),a.a.createElement($,{loading:e}),a.a.createElement(ne,null))}},{key:"render",value:function(){var e=this.props.typingFinished;return a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"p-2"},e?this.typingSummary():this.currentlyTyping()))}}]),t}(r.Component),ae=Object(h.b)((function(e){return{typingFinished:e.typingFinished,loading:e.loading}}))(re),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ce=n(17),se=n(58),ue=n(59),pe=n(61),le=n(13),he=n.n(le),de=n(60),fe=n(12),ye=n(31),me=n.n(ye),ge=function(){return me.a.get("https://en.wikipedia.org/w/api.php?origin=*&action=query&generator=random&prop=extracts&exchars=1000&format=json")},be=he.a.mark(Ee),ve=he.a.mark(Te);function we(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(de.a)(he.a.mark((function e(){var t,n,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n>10||t&&!t.title.match(/user|talk|Wikipedia|Template/i)&&t.extract.length>100)){e.next=6;break}return e.abrupt("break",14);case 6:return e.next=8,ge();case 8:r=e.sent,t=Object.values(r.data.query.pages)[0],n++;case 11:e.next=1;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(fe.a)(we);case 3:return t=e.sent,e.next=6,Object(fe.b)(N());case 6:return e.next=8,Object(fe.b)(M(t.extract,t.title));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(fe.b)({type:x,message:e.t0.message});case 14:case"end":return e.stop()}}),be,null,[[0,10]])}function Te(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.c)(I,Ee);case 2:case"end":return e.stop()}}),ve)}var je=Te,ke=Object(pe.a)(),xe=Object(ce.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case C:case D:case _:case S:case F:case P:return O({},e,{},t.payload);case A:return O({},e,{},t.payload,{numberOfErrors:e.numberOfErrors+1,errorPosition:e.currentPosition});default:return e}}),Object(ue.composeWithDevTools)(Object(ce.applyMiddleware)(se.a,ke)));ke.run(je),i.a.render(a.a.createElement(h.a,{store:xe},a.a.createElement(ae,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/typer",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/typer","/service-worker.js");oe?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ie(e)}))}}()},62:function(e,t,n){e.exports=n(141)},67:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.6eba485d.chunk.js.map